<html layout:decorate="~{admin}">
<div layout:fragment="content">
	    <div class="content">
      <div class="mb-9">
        <div class="row g-3 mb-4">
          <div class="col-auto">
            <h2 class="mt-3">회원목록</h2>
          </div>
	
<table class="table mt-5">
  <thead>
    <tr>
      <th class="sort text-end align-middle pe-0 ps-4" scope="col" style="width:50px;"></th>
      <th class="sort white-space-nowrap align-middle ps-4" scope="col" style="width:200px;" data-sort="customer">사용자명</th>
      <th class="sort align-middle text-middle ps-4" scope="col" data-sort="price" style="width:220px;">회원 등급</th>
      <th class="sort align-middle ps-4" scope="col" data-sort="category" style="width:300px;">휴대폰 번호</th>
      <th class="sort align-middle ps-4" scope="col" data-sort="time" style="width:180px;">가입일</th>
    </tr>
  </thead>
  <tbody>
    <th:block th:each="member : ${members}">
      <tr>
        <form action="/updateRole" method="post">
          <!-- 사용자 ID를 히든 필드로 전달 -->
          <input type="hidden" name="mid" th:value="${member.mid}">
          <th scope="row">[[${member.mid}]]</th>
          <td class="align-middle">
            <input type="text" class="form-control" th:value="${member.username}" readonly>
          </td>
          <td>
            <!-- 역할 선택 -->
            <select name="role" id="role" class="form-control custom-select" style="width:120px;">
              <option th:value="'ROLE_USER'" th:text="'일반 회원'" th:selected="${member.role == 'ROLE_USER'}">일반 회원</option>
              <option th:value="'ROLE_ADMIN'" th:text="'관리자'" th:selected="${member.role == 'ROLE_ADMIN'}">관리자</option>
            </select>
          </td>
          <td>
            <input type="text" class="form-control" th:value="${member.maddr}" readonly>
          </td>
          <td>
            <input type="text" class="form-control" th:value="${#temporals.format(member.mdate, 'yyyy-MM-dd')}" readonly>
          </td>
          <td>
            <!-- 역할 변경 버튼 -->
            <input type="submit" class="btn btn-primary" value="변경" style="width:100px;">
          </td>
        </form>
        <td>
        <form action="/deleteUser" method="post" style="display:inline;">
            <input type="hidden" name="mid" th:value="${member.mid}">
            <input type="submit" class="btn btn-danger" value="삭제" style="width:100px;">
          </form>
          </td>
      </tr>
    </th:block>
  </tbody>
</table>


</div>
</div>
</div>

</div>
</html>