<html layout:decorate="~{admin}">
<div layout:fragment="content">

<h4>관리자용 메뉴</h4>

<div class="container d-flex">
  <div class="nav-container">
    <ul class="nav flex-column">
      <li class="nav-item">
        <a class="nav-link" href="/admin/userconfig">사용자 관리</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="/admin/festivalconfig">축제 게시물 관리</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="#">Link</a>
      </li>
      <li class="nav-item">
        <a class="nav-link disabled" aria-disabled="true">Disabled</a>
      </li>
    </ul>
  </div>
  
  <div class="chart-container" style="flex-grow: 1; padding-left: 20px;">
    <canvas id="myChart"></canvas>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
  const ctx = document.getElementById('myChart');

  // 총 방문자 수를 타임리프에서 가져오기
  const totalVisitorCount = [[${visitorCount}]];  // 타임리프 표현식

  // 최근 1주일의 날짜 생성
  const labels = [];
  const today = new Date();
  for (let i = 6; i >= 0; i--) {
    const date = new Date(today);
    date.setDate(today.getDate() - i);
    labels.push(date.toLocaleDateString()); // YYYY/MM/DD 형식으로 변환
  }

  // 차트 데이터 (여기에 실제 데이터를 추가할 수 있음)
  const data = [12, 19, 3, 5, 2, 3, 7]; // 예시 데이터 (7일에 대한 데이터)

  new Chart(ctx, {
    type: 'bar',
    data: {
      labels: labels,
      datasets: [{
        label: '일일 방문자 수',
        data: data,
        borderWidth: 1,
        backgroundColor: 'rgba(15, 59, 66, 1)',
        borderColor: 'rgba(12, 47, 53, 1)',
      }]
    },
    options: {
      responsive: true,
      maintainAspectRatio: false,
      plugins: {
        title: {
          display: true,
          text: '총 방문자 수: ' + totalVisitorCount // 그래프 제목에 총 방문자 수 추가
        }
      },
      scales: {
        y: {
          beginAtZero: true
        }
      }
    }
  });
</script>
</div>
</html>
