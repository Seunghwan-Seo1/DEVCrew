<html layout:decorate="~{layout}">
<div layout:fragment="content">

	<div class="hero hero-inner">
		<div class="container">
			<div class="row align-items-center">
				<div class="col-lg-6 mx-auto text-center">
					<div class="intro-wrap">
						<h1 class="mb-0">축제</h1>
						<p class="text-white">축제는 혼자가 아닌 함께하는 즐거움! 친구와 함께 즐길 축제를
							찾아보세요.</p>
					</div>
				</div>
			</div>
		</div>
	</div>

	<div class="container px-4 py-5" id="featured-3">
        <h1 class="visually-hidden">페스티벌</h1>
        <div class="d-flex justify-content-between align-items-center mb-4">
            <h2 class="pb-2 border-bottom">축제 목록</h2>
            <a href="/festival/create" sec:authorize="isAuthenticated()" class="btn btn-success">축제등록</a> <!-- 등록 버튼 추가 -->
        </div>
        
        
        
        
<!-- 검색	버튼 추가 -->
<form action="/festival/find" method="get">
 <div class="input-group">
                <input type="text" name ="keyword" id="search" class="form-control" placeholder="검색...">
                <input type="submit" class="btn btn-primary" value="검색">                
 </div>
</form>
<!-- 검색	버튼 추가 -->



		
			<!-- 필터 -->


			<!-- 필터 -->

			
				

<!-- 사진 및 간단한 설명 반복문 -->
<div class="row g-3 py-5 row-cols-1 row-cols-lg-4">
    <!-- 페이징된 페스티벌 리스트 반복문 -->
    <th:block th:each="festival : ${festivalPage.content}">
        <div class="feature col festival-item"
             data-name="${festival.fname}" 
             data-location="${festival.flocation}"
             data-category="${festival.fcategory}">
             
            <div class="feature-icon">
                <a th:href="@{/festival/readdetail/{id}(id=${festival.fid})}" style="text-decoration: none;">
                    <img class="img-fluid" th:src="@{https://bucketimgexamssh.s3.ap-northeast-2.amazonaws.com/{file}(file=${festival.fimg})}" 
                         th:alt="${festival.fname}">
                </a>
            </div>
            
            <h3 class="fs-3 text-body-emphasis festival-name" th:text="${festival.fname}"></h3>
        </div>
    </th:block>
</div>

<!-- 페이징 링크 -->
<div class="pagination">
    <a th:href="@{/festival/readlist(page=${festivalPage.number - 1}, size=${festivalPage.size})}" 
       th:if="${festivalPage.hasPrevious()}" class="btn btn-primary">이전</a>
    
    <span>현재 페이지: <span th:text="${festivalPage.number + 1}"></span> / <span th:text="${festivalPage.totalPages}"></span></span>
    
    <a th:href="@{/festival/readlist(page=${festivalPage.number + 1}, size=${festivalPage.size})}" 
       th:if="${festivalPage.hasNext()}" class="btn btn-primary">다음</a>
</div>


<nav aria-label="Page navigation">
    <ul class="pagination justify-content-center">
        <!-- Previous button -->
        <li class="page-item" th:if="${currentPage > 0}">
            <a class="page-link" th:href="@{/readlist(page=${currentPage - 1}, search=${search}, region=${region}, category=${category})}" aria-label="Previous">
                <span aria-hidden="true">&laquo;</span>
            </a>
        </li>
        
        <!-- Page numbers -->
        <li class="page-item" th:each="i : ${#numbers.sequence(0, totalPages - 1)}" th:classappend="${currentPage == i} ? 'active' : ''">
            <a class="page-link" th:href="@{/readlist(page=${i}, search=${search}, region=${region}, category=${category})}">[[${i + 1}]]</a>
        </li>
        
        <!-- Next button -->
        <li class="page-item" th:if="${currentPage < totalPages - 1}">
            <a class="page-link" th:href="@{/readlist(page=${currentPage + 1}, search=${search}, region=${region}, category=${category})}" aria-label="Next">
                <span aria-hidden="true">&raquo;</span>
            </a>
        </li>
    </ul>
</nav>


			</div>
			<!-- 사진 및 간단한설명 반복문-->
<!-- CSS -->
<style>
    
    .row {
    display: flex;
    flex-wrap: wrap; /* 줄 바꿈 허용 */
    justify-content: center; /* 중앙 정렬 */
    align-items: flex-start; /* 위쪽 정렬 */
}

.feature {
    margin: 10px; /* 통일된 마진 */
    text-align: center; /* 텍스트 중앙 정렬 */
}





img {
    width: 100%; /* 이미지 너비를 100%로 설정 */
    height: auto; /* 비율 유지 */
    object-fit: cover; /* 비율 유지하며 잘림 */
}


    .festival-name {
        font-size: 2rem; /* 적절한 텍스트 크기 설정 */
        color: #000; /* 텍스트 색상 */
        text-align: center; /* 텍스트 중앙 정렬 */
        margin-top: 0.5rem; /* 이미지와 텍스트 사이 간격 */
        margin-bottom: 1rem; /* 텍스트와 다른 요소 사이 여백 */
    }

    /* 작은 화면을 위한 반응형 디자인 */
    @media (max-width: 768px) {
        .feature-icon {
            height: 200px; /* 작은 화면에서의 이미지 높이 조정 */
        }
        .festival-name {
            font-size: 1.25rem; /* 작은 화면에서 텍스트 크기 조정 */
            margin-top: 0.3rem; /* 작은 화면에서 이미지와 텍스트 간격 조정 */
            margin-bottom: 0.8rem; /* 텍스트와 다른 요소 사이 여백 조정 */
        }
    }

    /* 아주 작은 화면을 위한 반응형 디자인 */
    @media (max-width: 480px) {
        .feature-icon {
            height: 150px; /* 아주 작은 화면에서의 이미지 높이 조정 */
        }
        .festival-name {
            font-size: 1rem; /* 아주 작은 화면에서 텍스트 크기 조정 */
            margin-top: 0.2rem; /* 이미지와 텍스트 사이 간격 */
            margin-bottom: 0.5rem; /* 텍스트와 다른 요소 사이 여백 */
        }
    }
</style>


</div>
</html>
