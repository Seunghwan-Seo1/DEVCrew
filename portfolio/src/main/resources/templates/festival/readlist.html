<html layout:decorate="~{layout}">
<div layout:fragment="content">

	<div class="hero hero-inner">
		<div class="container">
			<div class="row align-items-center">
				<div class="col-lg-6 mx-auto text-center">
					<div class="intro-wrap">
						<h1 class="mb-0">축제</h1>
						<p class="text-white">축제는 혼자가 아닌 함께하는 즐거움! 친구와 함께 즐길 축제를
							찾아보세요.</p>
					</div>
				</div>
			</div>
		</div>
	</div>

	<div class="container px-4 py-5" id="featured-3">
        <h1 class="visually-hidden">페스티벌</h1>
        <div class="d-flex justify-content-between align-items-center mb-4">
            <h2 class="pb-2 border-bottom">축제 목록</h2>
            <a href="/festival/create" sec:authorize="isAuthenticated()" class="btn btn-success">축제등록</a> <!-- 등록 버튼 추가 -->
        </div>
        
        
        
        
<!-- 검색	버튼 추가 -->
 <div class="input-group">
                <input type="text" id="search" class="form-control" placeholder="검색...">
                <button class="btn btn-primary" onclick="filterFestivals()">검색</button>
            </div>
        </div>
        
        <div class="row g-4 py-5 row-cols-1 row-cols-lg-3">
<!-- 검색	버튼 추가 -->



		
			<!-- 필터 -->

<style>
.filter-container {
	max-width: 1000px; /* 필터 너비를 조정 */
	margin: 0 auto; /* 가운데 정렬 */
}
</style>

		<div class="condition">
   <div class="container mt-4">
        <div class="row">
       
           <div class="filter-container">
               <h5>검색 조건</h5>
               <form>
             
           <div class="form-group">
                     <label for="category">지역</label>
                     <select class="form-control" id="region"> <!-- ID 수정 -->
                         <option>전체</option>
                         <option>서울/경기/인천</option>
                         <option>부산/울산/경남</option>
                         <option>대구/경북</option>
                         <option>광주/전라</option>
                         <option>제주</option>                       
                     </select>
                 </div>
                 
                 
                 <div class="form-group">
                     <label for="category">카테고리</label>
                     <select class="form-control" id="fcategory">
                         <option>전체</option>
                         <option>나들이</option>
                         <option>가을꽃</option>
                         <option>야경</option>
                         <option>문화예술</option>
                         <option>미디어아트</option>                       
                         <option>빛</option>                       
                     </select>
                 </div>
                 
		                   
				<div class="form-group">       
                 <label for="serve">축제 참여비용</label><br>
                 <input type="checkbox" name="options" value="free"> 무료 <br>
                 <input type="checkbox" name="options" value="paid"> 유료 <br>
				
				                </div>
                                       
                   <div class="form-group">
                       <!-- <label>축제 참여비용</label> -->
                       <input type="range" class="form-control-range" id="priceRange">
                       <small>참여비용 범위: 0원~70,000원</small>
                   </div>
                   <div class="form-group">
                     <label for="startDate">시작일</label>
                     <input type="date" class="form-control" id="startDate">
                     <label for="endDate">종료일</label>
                     <input type="date" class="form-control" id="endDate">
                   </div> 
                   
                   <div class="form-group">       
					<label for="serve">원하는 서비스를 선택하세요</label><br>
				  <input type="checkbox" name="options" value="performance"> 공연 <br>
                  <input type="checkbox" name="options" value="food"> 음식 부스 <br>
                  <input type="checkbox" name="options" value="workshop"> 체험 워크숍 <br>
                  <input type="checkbox" name="options" value="transportation"> 교통 서비스 <br>
                  <input type="checkbox" name="options" value="souvenir"> 기념품 판매 <br>
                  <input type="checkbox" name="options" value="safety"> 안전 관리 <br>
                  <input type="checkbox" name="options" value="guide"> 관광 가이드 서비스 <br>

                   </div>
                   
                <button type="submit" class="btn btn-primary">조건 초기화</button>
               </form>
                </div>
            
            
        </div>
   </div>
   
    </div>
			<!-- 필터 -->

			<div class="col-md-9">
				

					<!-- 사진 및 간단한설명 반복문-->
			<div class="row row-cols-1 row-cols-lg-3">
				<th:block th:each="festival : ${festivals}">
					<div class="feature col festival-item"
						data-name="[[${festival.fname}]]"
						data-location="[[${festival.flocation}]]"
						data-category="[[${festival.category}]]">
						<div
							class="feature-icon d-inline-flex align-items-center justify-content-center text-bg-primary bg-gradient fs-2 mb-3">
							<a th:href="@{|/festival/readdetail/${festival.fid}|}"
								style="text-decoration: none;"> <img class="img-fluid"
								th:src="@{|https://bucketimgexamssh.s3.ap-northeast-2.amazonaws.com/${festival.fimg}|}">
							</a>
						</div>
						<h3 class="fs-3 text-body-emphasis festival-name">
							[[${festival.fname}]]</h3>
					</div>
				</th:block>
			</div>
			<!-- 사진 및 간단한설명 반복문-->
<!-- CSS -->
<style>
    .feature-icon {
        width: 100%; /* feature-icon의 너비를 100%로 설정 */
        height: 300px; /* 고정된 높이 설정 */
        overflow: hidden; /* 넘치는 부분 숨김 */
        text-align: center; /* 텍스트 정렬 */
        margin-bottom: 1rem; /* 이미지와 제목 사이 간격 */
        position: relative; /* 자식 요소 배치 제어 */
        display: flex;
        justify-content: center;
        align-items: center; /* 이미지 중앙 정렬 */
    }

    img {
        width: 100%; /* 이미지 너비를 100%로 설정 */
        height: 100%; /* 이미지 높이를 100%로 설정 */
        object-fit: cover; /* 이미지 비율 유지하며 잘림 */
    }

    .festival-name {
        font-size: 1.75rem; /* 적절한 텍스트 크기 설정 */
        color: #000; /* 텍스트 색상 */
        text-align: center; /* 텍스트 중앙 정렬 */
        margin-top: 0.5rem; /* 이미지와 텍스트 사이 간격 */
        margin-bottom: 1rem; /* 텍스트와 다른 요소 사이 여백 */
    }

    /* 작은 화면을 위한 반응형 디자인 */
    @media (max-width: 768px) {
        .feature-icon {
            height: 200px; /* 작은 화면에서의 이미지 높이 조정 */
        }
        .festival-name {
            font-size: 1.25rem; /* 작은 화면에서 텍스트 크기 조정 */
            margin-top: 0.3rem; /* 작은 화면에서 이미지와 텍스트 간격 조정 */
            margin-bottom: 0.8rem; /* 텍스트와 다른 요소 사이 여백 조정 */
        }
    }

    /* 아주 작은 화면을 위한 반응형 디자인 */
    @media (max-width: 480px) {
        .feature-icon {
            height: 150px; /* 아주 작은 화면에서의 이미지 높이 조정 */
        }
        .festival-name {
            font-size: 1rem; /* 아주 작은 화면에서 텍스트 크기 조정 */
            margin-top: 0.2rem; /* 이미지와 텍스트 사이 간격 */
            margin-bottom: 0.5rem; /* 텍스트와 다른 요소 사이 여백 */
        }
    }
</style>






			</div>
			</div>
		</div>
	</div>

	  <script>
    // 축제 필터링 기능
    function filterFestivals() {
        const input = document.getElementById('search').value.toLowerCase(); // 검색창 입력 값
        const region = document.getElementById('region').value.toLowerCase(); // 지역 필터 값
        const category = document.getElementById('fcategory').value.toLowerCase(); // 카테고리 필터 값
        const festivalItems = document.querySelectorAll('.festival-item'); // 축제 목록

        festivalItems.forEach(item => {
            const name = item.getAttribute('data-name').toLowerCase(); // 축제 이름
            const location = item.getAttribute('data-location').toLowerCase(); // 축제 위치
            const itemCategory = item.getAttribute('data-category') ? item.getAttribute('data-category').toLowerCase() : ''; // 축제 카테고리

            // 조건 확인
            const matchesSearch = name.includes(input); // 검색어와 일치 여부
            const matchesRegion = region === '전체' || location.includes(region); // 지역 필터와 일치 여부
            const matchesCategory = category === '전체' || itemCategory.includes(category); // 카테고리 필터와 일치 여부

            // 조건에 맞는 항목만 보이게 설정
            if (matchesSearch && matchesRegion && matchesCategory) {
                item.style.display = ''; // 조건에 맞으면 표시
            } else {
                item.style.display = 'none'; // 조건에 맞지 않으면 숨김
            }
        });
    }

    // 필터 초기화
    function resetFilter() {
        document.getElementById('search').value = ''; // 검색어 초기화
        document.getElementById('region').selectedIndex = 0; // 지역 필터 초기화
        document.getElementById('fcategory').selectedIndex = 0; // 카테고리 필터 초기화
        filterFestivals(); // 필터 재적용
    }

    // 검색 입력 시 필터링 자동 적용
    document.getElementById('search').addEventListener('input', filterFestivals);

    // 지역 필터 변경 시 필터링 적용
    document.getElementById('region').addEventListener('change', filterFestivals);

    // 카테고리 필터 변경 시 필터링 적용
    document.getElementById('fcategory').addEventListener('change', filterFestivals);
</script>



</div>
</html>
