<!-- 서승환 -->
<!-- /*
* Template Name: Tour
* Template Author: Untree.co
* Tempalte URI: https://untree.co/
* License: https://creativecommons.org/licenses/by/3.0/
*/ -->
<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta name="author" content="Untree.co">
	<link rel="shortcut icon" href="favicon.png">

	<meta name="description" content="" />
	<meta name="keywords" content="bootstrap, bootstrap4" />

	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&family=Source+Serif+Pro:wght@400;700&display=swap" rel="stylesheet">

	<link rel="stylesheet" href="/css/bootstrap.min.css">
	<link rel="stylesheet" href="/css/owl.carousel.min.css">
	<link rel="stylesheet" href="/css/owl.theme.default.min.css">
	<link rel="stylesheet" href="/css/jquery.fancybox.min.css">
	<link rel="stylesheet" href="/fonts/icomoon/style.css">
	<link rel="stylesheet" href="/fonts/flaticon/font/flaticon.css">
	<link rel="stylesheet" href="/css/daterangepicker.css">
	<link rel="stylesheet" href="/css/aos.css">
	<link rel="stylesheet" href="/css/style.css">

	<title>페이지 이름이 들어가는곳</title>
	
	<script>
        // 페이지가 로드될 때 방문자 수를 증가시키는 요청을 보냅니다.
        window.onload = function() {
            fetch('/visitor/increment')
                .then(response => response.text())
                .then(data => console.log(data))
                .catch(error => console.error('Error:', error));
        };
    </script>
	
</head>

<body>


	<div class="site-mobile-menu site-navbar-target">
		<div class="site-mobile-menu-header">
			<div class="site-mobile-menu-close">
				<span class="icofont-close js-menu-toggle"></span>
			</div>
		</div>
		<div class="site-mobile-menu-body"></div>
	</div>

	<nav class="site-nav">
		<div class="container">
			<div class="site-navigation">
				<a href="/" class="logo m-0">축제숙박 <span class="text-primary">.</span></a>

				<ul class="js-clone-nav d-none d-lg-inline-block text-left site-menu float-right">
					<li><a href="/">홈</a></li>
					<!-- <li class="has-children"> -->
						<li><a href="festival/readlist">축제소개</a></li>
					<!-- 	<ul class="dropdown">
						
							<li class="has-children">
								<a href="festival/readlist">축제 전체</a>
							</li>
						</ul>	 -->
							
						
					</li>
					<li class="has-children">
						<a href="#">숙박</a>
						<ul class="dropdown">						
							<li class="has-children">
								<a href="/lodge/secondmain">지역별 보기</a>
								<ul class="dropdown">
									<li><a href="#">서울/경기/인천</a></li>
									<li><a href="#">대전/충정</a></li>
									<li><a href="#">부산/울산</a></li>
									<li><a href="#">대구/경북</a></li>
									<li><a href="#">광주/전라</a></li>
									<li><a href="#">제주</a></li>
								</ul>
							</li>
						</ul>
					</li>

					<li><a sec:authorize="isAnonymous()" href="/signin">프로필</a></li>
					
					<li><a sec:authorize="isAuthenticated()" th:href="@{'/member/readdetail/' + ${#authentication.name}}">프로필</a></li>
					
					<li><a href="/csr">고객센터</a></li>

					<li><a sec:authorize="isAnonymous()" href="/signin">로그인</a></li>
					<li><a sec:authorize="isAuthenticated()" href="/signout">로그아웃</a></li>
					<li sec:authorize="hasAuthority('ROLE_ADMIN')"><a href="/admin/main">관리자 메뉴</a></li>
				</ul>

				<a href="#" class="burger ml-auto float-right site-menu-toggle js-menu-toggle d-inline-block d-lg-none light" data-toggle="collapse" data-target="#main-navbar">
					<span></span>
				</a>

			</div>
		</div>
	</nav>


	<div class="hero">
		<div class="container">
			<div class="row align-items-center">
				<div class="col-lg-7">
					<div class="intro-wrap">
						<h1 class="mb-5"><span class="d-block">축제를 즐기세요!</span>어디서?<span class="typed-words"></span></h1>

						<div class="row">
							<div class="col-12">
								<form class="form">
									<div class="row mb-2">
										<div class="col-sm-12 ">
											<select name="" id="" class="form-control custom-select">
												<option value="">목적지</option>
												<option value="">대구</option>
												<option value="">부산</option>
												<option value="">서울</option>
												<option value="">대전</option>
												<option value="">광주</option>
												<option value="">속초</option>
												<option value="">울산</option>
												<option value="">인천</option>
											</select>
										</div>
										

									</div>    
									<div class="row align-items-center">
										<div class="col-sm-12 col-md-6 mb-3 mb-lg-0 col-lg-4">
											<input type="submit" class="btn btn-primary btn-block" value="Search">
										</div>
										<div class="col-lg-8">
										
										</div>
									</div>
								</form>
							</div>
						</div>
					</div>
				</div>
				<div class="col-lg-5">
					<div class="slides">
						<img src="images/hero-slider-1.jpg" alt="Image" class="img-fluid active">
						<img src="images/hero-slider-2.jpg" alt="Image" class="img-fluid">
						<img src="images/hero-slider-3.jpg" alt="Image" class="img-fluid">
						<img src="images/hero-slider-4.jpg" alt="Image" class="img-fluid">
						<img src="images/hero-slider-5.jpg" alt="Image" class="img-fluid">
					</div>
				</div>
			</div>
		</div>
	</div>





	<div class="untree_co-section">
		<div class="container">
			<div class="row text-center justify-content-center mb-5">
				<div class="col-lg-7"><h2 class="section-title text-center">추천을 많이 받은 축제 장소!</h2></div>
			</div>

			<div class="owl-carousel owl-3-slider">

				<div class="item">
					<a class="media-thumb" href="images/hero-slider-1.jpg" data-fancybox="gallery">
						
						<img src="images/hero-slider-1.jpg" alt="Image" class="img-fluid">
					</a> 
				</div>

				<div class="item">
					<a class="media-thumb" href="images/hero-slider-2.jpg" data-fancybox="gallery">
						
						<img src="images/hero-slider-2.jpg" alt="Image" class="img-fluid">
					</a> 
				</div>

				<div class="item">
					<a class="media-thumb" href="images/hero-slider-3.jpg" data-fancybox="gallery">
						
						<img src="images/hero-slider-3.jpg" alt="Image" class="img-fluid">
					</a> 
				</div>


				<div class="item">
					<a class="media-thumb" href="images/hero-slider-4.jpg" data-fancybox="gallery">
						
						<img src="images/hero-slider-4.jpg" alt="Image" class="img-fluid">
					</a> 
				</div>

				<div class="item">
					<a class="media-thumb" href="images/hero-slider-5.jpg" data-fancybox="gallery">
						
						<img src="images/hero-slider-5.jpg" alt="Image" class="img-fluid">
					</a> 
				</div>

				<div class="item">
					<a class="media-thumb" href="images/hero-slider-1.jpg" data-fancybox="gallery">
						
						<img src="images/hero-slider-2.jpg" alt="Image" class="img-fluid">
					</a> 
				</div>

			</div>

		</div>
	</div>


	


	<div class="untree_co-section">
		<div class="container">
			<div class="row justify-content-center text-center mb-5">
				<div class="col-lg-6">
					<h2 class="section-title text-center mb-3">요즘 핫한! &amp; 할인 중인 장소</h2>
					<p>Far far away, behind the word mountains, far from the countries Vokalia and Consonantia, there live the blind texts. Separated they live in Bookmarksgrove right at the coast of the Semantics, a large language ocean.</p>
				</div>
			</div>
			<div class="row">
				<div class="col-6 col-sm-6 col-md-6 col-lg-3 mb-4 mb-lg-0">
					<div class="media-1">
						<a href="#" class="d-block mb-3"><img src="images/hero-slider-1.jpg" alt="Image" class="img-fluid"></a>
						<span class="d-flex align-items-center loc mb-2">
							<span class="icon-room mr-3"></span>
							<span>Italy</span>
						</span>
						<div class="d-flex align-items-center">
							<div>
								<h3><a href="#">Rialto Mountains</a></h3>
								<div class="price ml-auto">
									<span>$520.00</span>
								</div>
							</div>
							
						</div>
						
					</div>
				</div>
				<div class="col-6 col-sm-6 col-md-6 col-lg-3 mb-4 mb-lg-0">
					<div class="media-1">
						<a href="#" class="d-block mb-3"><img src="images/hero-slider-2.jpg" alt="Image" class="img-fluid"></a>
						<span class="d-flex align-items-center loc mb-2">
							<span class="icon-room mr-3"></span>
							<span>United States</span>
						</span>
						<div class="d-flex align-items-center">
							<div>
								<h3><a href="#">San Francisco</a></h3>
								<div class="price ml-auto">
									<span>$520.00</span>
								</div>
							</div>
							
						</div>
						
					</div>
				</div>
				<div class="col-6 col-sm-6 col-md-6 col-lg-3 mb-4 mb-lg-0">
					<div class="media-1">
						<a href="#" class="d-block mb-3"><img src="images/hero-slider-3.jpg" alt="Image" class="img-fluid"></a>
						<span class="d-flex align-items-center loc mb-2">
							<span class="icon-room mr-3"></span>
							<span>Malaysia</span>
						</span>
						<div class="d-flex align-items-center">
							<div>
								<h3><a href="#">Perhentian Islands</a></h3>
								<div class="price ml-auto">
									<span>$750.00</span>
								</div>
							</div>
							
						</div>
						
					</div>
				</div>
				<div class="col-6 col-sm-6 col-md-6 col-lg-3 mb-4 mb-lg-0">
					<div class="media-1">
						<a href="#" class="d-block mb-3"><img src="images/hero-slider-4.jpg" alt="Image" class="img-fluid"></a>

						<span class="d-flex align-items-center loc mb-2">
							<span class="icon-room mr-3"></span>
							<span>Switzerland</span>
						</span>

						<div class="d-flex align-items-center">
							<div>
								<h3><a href="#">Lake Thun</a></h3>
								<div class="price ml-auto">
									<span>$520.00</span>
								</div>
							</div>
							
						</div>
						
					</div>
				</div>
			</div>
		</div>
	</div>

	
	
	
	<div class="py-5 cta-section">
		<div class="container">
			<div class="row text-center">
				<div class="col-md-12">
					<h2 class="mb-2 text-white">Lets you Explore the Best. Contact Us Now</h2>
					<p class="mb-4 lead text-white text-white-opacity">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Excepturi, fugit?</p>
					<p class="mb-0"><a href="booking.html" class="btn btn-outline-white text-white btn-md font-weight-bold">Get in touch</a></p>
				</div>
			</div>
		</div>
	</div>

	<div class="site-footer">
		<div class="inner first">
			<div class="container">
				<div class="row">
					<div class="col-md-6 col-lg-4">
						<div class="widget">
							<h3 class="heading">About Tour</h3>
							<p>Far far away, behind the word mountains, far from the countries Vokalia and Consonantia, there live the blind texts.</p>
						</div>
						<div class="widget">
							<ul class="list-unstyled social">
								<li><a href="#"><span class="icon-twitter"></span></a></li>
								<li><a href="#"><span class="icon-instagram"></span></a></li>
								<li><a href="#"><span class="icon-facebook"></span></a></li>
								<li><a href="#"><span class="icon-linkedin"></span></a></li>
								<li><a href="#"><span class="icon-dribbble"></span></a></li>
								<li><a href="#"><span class="icon-pinterest"></span></a></li>
								<li><a href="#"><span class="icon-apple"></span></a></li>
								<li><a href="#"><span class="icon-google"></span></a></li>
							</ul>
						</div>
					</div>
					<div class="col-md-6 col-lg-2 pl-lg-5">
						<div class="widget">
							<h3 class="heading">Pages</h3>
							<ul class="links list-unstyled">
								<li><a href="#">Blog</a></li>
								<li><a href="#">About</a></li>
								<li><a href="#">Contact</a></li>
							</ul>
						</div>
					</div>
					<div class="col-md-6 col-lg-2">
						<div class="widget">
							<h3 class="heading">Resources</h3>
							<ul class="links list-unstyled">
								<li><a href="#">Blog</a></li>
								<li><a href="#">About</a></li>
								<li><a href="#">Contact</a></li>
							</ul>
						</div>
					</div>
					<div class="col-md-6 col-lg-4">
						<div class="widget">
							<h3 class="heading">Contact</h3>
							<ul class="list-unstyled quick-info links">
								<li class="email"><a href="#">mail@example.com</a></li>
								<li class="phone"><a href="#">+1 222 212 3819</a></li>
								<li class="address"><a href="#">43 Raymouth Rd. Baltemoer, London 3910</a></li>
							</ul>
						</div>
					</div>
				</div>
			</div>
		</div>



		<div class="inner dark">
			<div class="container">
				<div class="row text-center">
					<div class="col-md-8 mb-3 mb-md-0 mx-auto">
						<p>Copyright &copy;<script>document.write(new Date().getFullYear());</script>. All Rights Reserved. &mdash; Designed with love by <a href="https://untree.co" class="link-highlight">Untree.co</a> <!-- License information: https://untree.co/license/ -->
						</p>
					</div>
					
				</div>
			</div>
		</div>
	</div>

	<div id="overlayer"></div>
	<div class="loader">
		<div class="spinner-border" role="status">
			<span class="sr-only">Loading...</span>
		</div>
	</div>
	
	    <button class="btn btn-primary floating-btn" id="openOverlayBtn">
      <i class="fas fa-comment-dots"></i> GPT 대화하기
    </button>

    <div class="overlay" id="overlay">
      <div class="overlay-content">
        <div class="chat-content tab-content flex-1">
          <div class="tab-pane h-100 fade active show" id="tab-thread-1" role="tabpanel" aria-labelledby="tab-thread-1">
            <div class="card flex-1 h-100 phoenix-offcanvas-container">
              <div class="card-header p-3 p-md-4 d-flex flex-between-center">
                <div class="d-flex align-items-center">
                  <button class="btn ps-0 pe-2 text-body-tertiary d-sm-none" data-phoenix-toggle="offcanvas" data-phoenix-target="#chat-sidebar">
                    <span class="fa-solid fa-chevron-left"></span>
                  </button>
                  <div class="d-flex flex-column flex-md-row align-items-md-center">
                    <button class="btn fs-7 fw-semibold text-body-emphasis d-flex align-items-center p-0 me-3 text-start" data-phoenix-toggle="offcanvas" data-phoenix-target="#thread-details-0">
                      <span class="line-clamp-1">GPT</span>
                      <span class="fa-solid fa-chevron-down ms-2 fs-10"></span>
                    </button>
                  </div>
                </div>
              </div>

              <!-- 채팅 내용 표시 영역 -->
              <div class="card-body p-3 p-sm-4 scrollbar" id="chat-container" style="height: 400px; overflow-y: auto;">
                <!-- 대화 내용이 여기 동적으로 추가됩니다 -->
              </div>

              <!-- 입력 및 전송 버튼 -->
              <div class="card-footer">
                <div class="chat-textarea outline-none scrollbar mb-1">
                  <input id="question" class="form-control" type="text" placeholder="메시지를 입력하세요" />
                </div>
                <div class="d-flex justify-content-between align-items-end">
                  <div>
                    <button class="btn btn-primary fs-10" type="button" onclick="askGPT()">질문
                      <span class="fa-solid fa-paper-plane ms-1"></span>
                    </button>
                    <button class="btn btn-danger" id="closeOverlayBtn">닫기</button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
	

	<script src="/js/jquery-3.4.1.min.js"></script>
	<script src="/js/popper.min.js"></script>
	<script src="/js/bootstrap.min.js"></script>
	<script src="/js/owl.carousel.min.js"></script>
	<script src="/js/jquery.animateNumber.min.js"></script>
	<script src="/js/jquery.waypoints.min.js"></script>
	<script src="/js/jquery.fancybox.min.js"></script>
	<script src="/js/aos.js"></script>
	<script src="/js/moment.min.js"></script>
	<script src="/js/daterangepicker.js"></script>

	<script src="/js/typed.js"></script>
	<script>
		$(function() {
			var slides = $('.slides'),
			images = slides.find('img');

			images.each(function(i) {
				$(this).attr('data-id', i + 1);
			})

			var typed = new Typed('.typed-words', {
				strings: ["대구."," 서울."," 부산.", " 대전.", " 인천."],
				typeSpeed: 80,
				backSpeed: 80,
				backDelay: 4000,
				startDelay: 1000,
				loop: true,
				showCursor: true,
				preStringTyped: (arrayPos, self) => {
					arrayPos++;
					console.log(arrayPos);
					$('.slides img').removeClass('active');
					$('.slides img[data-id="'+arrayPos+'"]').addClass('active');
				}

			});
		})
	</script>
	<script type="text/javascript">
      // 대화 히스토리 관리
      let conversationHistory = [];

      // 한 글자씩 타이핑 효과를 주는 함수
      function typeText(text, element, delay) {
        let index = 0;
        function type() {
          if (index < text.length) {
            element.innerHTML += text.charAt(index);
            index++;
            setTimeout(type, delay);
          }
        }
        type(); // 타이핑 시작
      }

      // GPT에 질문하고 답변을 출력하는 함수
      async function askGPT() {
        const question = document.getElementById('question').value; // 질문 입력값을 가져옴
        const chatContainer = document.getElementById('chat-container');

        // 입력된 질문이 공백이면 알림을 표시하고 종료
        if (question.trim() === '') {
          alert("질문을 입력하세요!");
          return;
        }

        // 사용자 질문을 대화창에 추가 (중복 방지)
        const userMessage = document.createElement('div');
        userMessage.classList.add('d-flex', 'chat-message', 'justify-content-end'); // 우측 정렬
        userMessage.innerHTML = `
          <div class="d-flex mb-2 justify-content-end flex-1">
            <div class="w-100 w-xxl-75">
              <div class="d-flex flex-end-center hover-actions-trigger">
                <div class="chat-message-content me-2">
                  <div class="mb-1 sent-message-content bg-primary rounded-2 p-3 text-white">
                    <p class="mb-0">${question}</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        `;
        chatContainer.appendChild(userMessage);

        // 질문 입력창 비우기
        document.getElementById('question').value = '';

        // 서버로 질문 전송 및 응답 받기
        try {
          const response = await fetch('/ask', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json'
            },
            body: JSON.stringify({ question: question }) // 질문을 서버로 보냄
          });

          // 서버에서 응답 받기
          const responseData = await response.text();

          // 서버 응답을 대화창에 추가 (중복 방지)
          const gptMessage = document.createElement('div');
          gptMessage.classList.add('d-flex', 'chat-message', 'justify-content-start'); // 좌측 정렬
          gptMessage.innerHTML = `
            <div class="d-flex mb-2 flex-1">
              <div class="w-100 w-xxl-75">
                <div class="d-flex hover-actions-trigger">
                  <div class="chat-message-content received me-2">
                    <div class="mb-1 received-m('overlay');essage-content border rounded-2 p-3">
                      <p class="mb-0">${responseData}</p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          `;
          chatContainer.appendChild(gptMessage);

          // 스크롤을 하단으로 유지
          chatContainer.scrollTop = chatContainer.scrollHeight;

        } catch (error) {
          console.error("에러 발생: ", error);
          const errorMessage = document.createElement('div');
          errorMessage.classList.add('d-flex', 'chat-message');
          errorMessage.innerHTML = `<p class="text-danger">에러 발생: ${error.message}</p>`;
          chatContainer.appendChild(errorMessage);

          // 스크롤을 하단으로 유지
          chatContainer.scrollTop = chatContainer.scrollHeight;
        }
      }
    </script>

    <script>
	  // 오버레이 열기/닫기 처리
	  const openOverlayBtn = document.getElementById('openOverlayBtn');
	  const closeOverlayBtn = document.getElementById('closeOverlayBtn');
	  const overlay = document.getElementById('overlay');
	
	  // 오버레이 열기
	  openOverlayBtn.addEventListener('click', function () {
	    overlay.style.display = 'block';
	  });
	
	  // 오버레이 닫기
	  closeOverlayBtn.addEventListener('click', function () {
	    overlay.style.display = 'none';
	  });
	</script>


	<script src="/js/custom.js?ver=1"></script>

</body>

</html>
